/*
 CSSAnimation v0.2
 Provides 'cssAnimationKeyframe' events for keyframe animations.
 http://www.joelambert.co.uk/cssa

 Copyright 2011, Joe Lambert. All rights reserved
 Free to use under the MIT license.
 http://www.opensource.org/licenses/mit-license.php
*/
var CSSAnimation={version:"0.2"};CSSAnimation.find=function(a){for(var j=document.styleSheets,h=j.length-1;h>=0;h--)try{for(var d=j[h],e=d.cssRules?d.cssRules:d.rules?d.rules:[],c=e.length-1;c>=0;c--)if((e[c].type===window.CSSRule.WEBKIT_KEYFRAMES_RULE||e[c].type===window.CSSRule.MOZ_KEYFRAMES_RULE||e[c].type===window.CSSRule.KEYFRAMES_RULE)&&e[c].name==a)return e[c]}catch(l){}return null};
CSSAnimation.trigger=function(a,j,h,d){var e={},c={},l=null,o=0,q=0,k={base:5,easing:"linear",iterationCount:1},r=["Webkit","Moz"],i;for(i in d)k[i]=d[i];if(!a.isPlaying){l=CSSAnimation.find(j);if(!l)return false;e={};for(var f=0;f<l.cssRules.length;f++){d=l.cssRules[f];i=d.keyText;var m=0;i=="from"?m=0:i=="to"?m=1:m=i.replace("%","")/100;e[m*100+"%"]=d}o=(new Date).getTime();var p=m=roundedKey=keyframe=null,t=function(b,g){var n=document.createEvent("Event");n.initEvent("cssAnimationKeyframe",true,
true);n.animationName=j;n.keyText=b;n.elapsedTime=g;a.dispatchEvent(n)};f=0;var s=false,u=function(b){s=false;for(f=0;f<r.length&&!s;f++)if(a.style[r[f]+"AnimationName"]!==undefined)var g=r[f];if(g!==undefined){a.style[g+"AnimationDuration"]=b.duration;a.style[g+"AnimationTimingFunction"]=b.timingFunction;a.style[g+"AnimationIterationCount"]=b.iterationCount;a.style[g+"AnimationName"]=b.name}if(a.style.animationName!==undefined){a.style.animationDuration=b.duration;a.style.animationTimingFunction=
b.timingFunction;a.style.animationIterationCount=b.iterationCount;a.style.animationName=b.name}if(g!==undefined||a.style.animationName!==undefined)s=true};u({name:j,duration:h+"ms",timingFunction:k.easing,iterationCount:k.iterationCount});a.isPlaying=true;(function b(){p=(new Date).getTime();percent=Math.floor((p-(o+q*h))/h*100);key=percent-percent%k.base+"%";if((keyframe=e[key])&&!c[key]){c[key]=true;t(key,(p-o)/1E3)}if(percent<100)requestAnimFrame(b,a);else{c["100%"]||t("100%",(p-o)/1E3);q++;if(q<
k.iterationCount||k.iterationCount=="infinite"){c={};requestAnimFrame(b,a)}else{u({name:null,duration:null,timingFunction:null,iterationCount:0});a.isPlaying=false}}})()}};window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();
